[TOC]

# æ€»ä½“åˆ†æ

**å»ºè®®ï¼šå…ˆå°†æœ¬æ–‡ä¸­æåˆ°çš„èµ°ä¸€éï¼Œè¯´ä¸å®šä¹±ç å°±æ¶ˆå¤±äº†**

## 1 CharacterEncodingFilter è®¾ç½®forceResponseEncodingä¸ºtrueå¯¼è‡´ä¹±ç 

**è¡¨ç°**ï¼šCharacterEncodingFilter è®¾ç½®forceResponseEncodingä¸ºtrueå¯¼è‡´ä¹±ç ï¼Œå¹¶ä¸”åªæœ‰åœ¨è®¿é—®é™æ€èµ„æºçš„æ—¶å€™ä¹±ç ï¼Œå¹¶ä¸”åªæ˜¯åœ¨é€šè¿‡tomcatå¯¼è‡´ä¹±ç ï¼Œé€šè¿‡æµè§ˆå™¨æ­£å¸¸è®¿é—®æ–‡ä»¶æ²¡æœ‰ä¹±ç ã€‚é™æ€èµ„æºä¹Ÿå·²ç»æ³¨æ˜äº†`<meta charset="UTF-8">`

**ç­”æ¡ˆ**ï¼šåŸå› åœ¨tomcat

### è§£å†³åŠæ³•

1. apache-tomcat-9.0.34**\conf\server.xml**çš„ç¬¬70è¡Œå·¦å³`Connector`æ ‡ç­¾æ·»åŠ `URIEncoding="UTF-8"`ğŸ‘‡

   ```xml
   <Connector port="8080" protocol="HTTP/1.1"
              connectionTimeout="20000"
              redirectPort="8443"
              URIEncoding="UTF-8"
              />
   ```

2. \apache-tomcat-9.0.34**\bin\catalina.bat**çš„å¤§æ¦‚ç¬¬216è¡Œï¼Œæœ‰å…³`set "JAVA_OPTS=%JAVA_OPTS% %JSSE_OPTS%"`ä¿®æ”¹ä¸º`set "JAVA_OPTS=%JAVA_OPTS% %JSSE_OPTS%"-Dfile.encoding=UTF8 -Dsun.jnu.encoding=UTF8`

   ```properties
   set "JAVA_OPTS=%JAVA_OPTS% %JSSE_OPTS%"-Dfile.encoding=UTF8 -Dsun.jnu.encoding=UTF8
   ```

3. \apache-tomcat-9.0.34**\conf\web.xml**çš„ç¬¬126è¡Œï¼Œå¯¹äºDefaultServletçš„é…ç½®ï¼Œä¿®æ”¹å¦‚ä¸‹ğŸ‘‡

   ```xml
   <servlet>
           <servlet-name>default</servlet-name>
           <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>
           <init-param>
               <param-name>debug</param-name>
               <param-value>0</param-value>
           </init-param>
           <init-param>
           	<param-name>fileEncoding</param-name>
           	<param-value>UTF-8</param-value>
           </init-param>
           <init-param>
               <param-name>listings</param-name>
               <param-value>false</param-value>
           </init-param>
           <load-on-startup>1</load-on-startup>
       </servlet>
   ```

## 2 tomcatæ§åˆ¶å¤ªä¹±ç 

**è¡¨ç°**:åœ¨è¿è¡Œtomcatçš„æ—¶å€™æ§åˆ¶å°ä¹±ç 

**ç­”æ¡ˆ**ï¼štomcatçš„\apache-tomcat-8.5.54\conf\logging.propertiesé‡Œé¢é…ç½®çš„ç¼–ç æ ¼å¼å’Œæ§åˆ¶å°ä¸ä¸€æ ·ï¼Œwindowsç³»ç»Ÿï¼Œwin10ä¸‹çš„ideaé»˜è®¤æ§åˆ¶å°ç¼–ç gbk

### è§£å†³æ–¹æ³•

```pro
java.util.logging.ConsoleHandler.encoding = GBK
```

è®¾ç½®java.util.logging.ConsoleHandler.encodingå’Œæ§åˆ¶å°ç¼–ç ä¸€è‡´

## 3 springmvcå‰åç«¯æ•°æ®ä¼ è¾“ä¹±ç 

**è¡¨ç°**ï¼šå‰åç«¯çš„ä¼ è¾“æ•°æ®ä¹±ç 

**åŸå› **ï¼šrequestå’Œresponseçš„é—®é¢˜

### è§£å†³æ–¹æ³•

åœ¨é¡¹ç›®web.xmlé…ç½®ç›‘å¬å™¨ï¼Œä¿®æ”¹ä¹±ç ğŸ‘‡

```xml
<filter>
    <filter-name>filterForCharSet</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
      <param-name>encoding</param-name>
      <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
      <param-name>forceRequestEncoding</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>forceResponseEncoding</param-name>
      <param-value>true</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>filterForCharSet</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
```

## 4 @ResponseBodyå¯¼è‡´ä¹±ç 

**è¡¨ç°**ï¼š@ResponseBodyè¿”å›çš„æ•°æ®ä¹±ç 

**åŸå› **ï¼š@ResponseBodyä¹±ç åŸå› ğŸ‘‡

> åœ¨springå¤„ç†ResponseBodyæ—¶æ¶‰åŠåˆ°org.springframework.http.converter.StringHttpMessageConverterè¿™ä¸ªç±»ï¼Œè¯¥ç±»åœ¨é»˜è®¤å®ç°ä¸­å°†defaultCharsetè®¾ä¸ºISO-8859-1ã€‚å½“@RequestMappingæ ‡è®°çš„æ–¹æ³•æœªé…ç½®produceså±æ€§æ—¶ï¼Œå°†è‡ªåŠ¨ä½¿ç”¨é»˜è®¤ç¼–ç ï¼›å¦‚æœé…ç½®äº†produceså±æ€§ï¼ŒAbstractHttpMessageConverterä¸­çš„writeæ–¹æ³•å°†ä¸ä¼šå—supportedMediaTypeså½±å“ï¼Œè€Œç”¨produceè®¾ç½®çš„headerèµ‹å€¼ç»™contenttypeã€‚æ”¹é€ ä¸€ä¸‹RequestMappingHandlerAdapterçš„é…ç½®ï¼ŒspringMvc.xmlå¦‚ä¸‹ï¼š
>
> **æ³¨æ„ï¼šåŸºäºspring3.2ä»¥åçš„é…ç½®æ–‡ä»¶ã€‚ç¼–ç é…ç½®éœ€è¦æ”¾åœ¨[mvc:annotation-driven/](mvc:annotation-driven/)ä¹‹å‰ï¼Œå¦åˆ™æ— æ•ˆã€‚**
>
> ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œc.ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚ åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/cckevincyh/article/details/81227864

### @ResponseBodyä¹±ç é—®é¢˜è§£å†³

é…ç½®springå®¹å™¨ğŸ‘‡

```xml
<!--        @Responseä¹±ç é—®é¢˜è§£å†³-->
    <bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter" >
        <property name="messageConverters">
            <list>
                <bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter" />
                <bean class="org.springframework.http.converter.StringHttpMessageConverter">
                    <property name="supportedMediaTypes">
                        <list>
                            <value>text/plain;charset=utf-8</value>
                            <value>text/html;charset=UTF-8</value>
                            <value>applicaiton/*;charset=UTF-8</value>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>
```

*å…¶ä»–è§£å†³åŠæ³•ğŸ‘‰ https://blog.csdn.net/cckevincyh/article/details/81227864   https://www.cnblogs.com/zou-zou/p/9345485.html*